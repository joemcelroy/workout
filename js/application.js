(function() {
  window.data = {
    exercises: {
      1: {
        name: "Barbell Squat",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_2.jpg"
      },
      2: {
        name: "Romanian Deadlift",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_2.jpg"
      },
      3: {
        name: "Lying Leg Curls",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_2.jpg"
      },
      4: {
        name: "Leg Press",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_2.jpg"
      },
      5: {
        name: "Leg Extensions",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_2.jpg"
      },
      6: {
        name: "Barbell Bench Press - Medium Grip",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_2.jpg"
      },
      7: {
        name: "Incline Dumbbell Press (Reverse Grip)",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_2.jpg"
      },
      8: {
        name: "Incline Dumbbell Flyes",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_2.jpg"
      },
      9: {
        name: "Cable Crossover",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_2.jpg"
      },
      10: {
        name: "Tricep Pushdown",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_2.jpg"
      },
      11: {
        name: "Standing Low-Pulley One-Arm Triceps Extension",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_2.jpg"
      },
      12: {
        name: "Close-Grip Barbell Bench Press",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_2.jpg"
      },
      13: {
        name: "Standing Calf Raises",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_2.jpg"
      },
      14: {
        name: "Seated Calf Raise",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_2.jpg"
      }
    },
    workouts: [
      {
        name: "Day 68 - Legs",
        exercises: [
          {
            exercise: 1,
            id: "68-1",
            weightRef: "61-1",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 4,
            id: "68-2",
            weightRef: "61-2",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 5,
            id: "68-3",
            weightRef: "61-3",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 2,
            id: "68-4",
            weightRef: "61-4",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 3,
            id: "68-5",
            weightRef: "61-4",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }
        ]
      }, {
        name: "Day 71 - Chest, Triceps & Calfs",
        week: 11,
        type: 1,
        exercises: [
          {
            exercise: 6,
            id: "71-1",
            weightRef: "64-1",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 7,
            id: "71-2",
            weightRef: "64-2",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 8,
            id: "71-3",
            weightRef: "64-3",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 9,
            id: "71-4",
            weightRef: "64-4",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 10,
            id: "71-5",
            weightRef: "64-5",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 11,
            id: "71-6",
            weightRef: "64-6",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }
            ]
          }, {
            exercise: 12,
            id: "71-7",
            weightRef: "64-7",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }
            ]
          }, {
            exercise: 13,
            id: "71-8",
            weightRef: "64-8",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Drop set"
              }
            ]
          }, {
            exercise: 14,
            id: "71-9",
            weightRef: "64-9",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Drop set"
              }
            ]
          }
        ]
      }
    ]
  };

}).call(this);

(function() {
  angular.module('workout', []).directive('ngTap', function() {
    return function(scope, element, attrs) {
      var tapping;
      tapping = false;
      element.bind('touchstart', function(e) {
        return tapping = true;
      });
      element.bind('touchmove', function(e) {
        return tapping = false;
      });
      element.bind('touchend', function(e) {
        if (tapping) {
          return scope.$apply(attrs['ngTap'], element);
        }
      });
      return element.bind('click', function(e) {
        if (window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g) === null) {
          return scope.$apply(attrs['ngTap'], element);
        }
      });
    };
  }).controller("AppCtrl", function($scope) {
    var readData, saveData, saveWorkoutRep;
    $scope.state = "selectDay";
    $scope.title = "12 Weeks to Size";
    $scope.exercises = window.data.exercises;
    $scope.days = window.data.workouts;
    saveWorkoutRep = function(ref, index, weight) {
      if ($scope.db[ref] == null) {
        $scope.db[ref] = [];
      }
      $scope.db[ref][index] = weight;
      return saveData();
    };
    readData = function() {
      var error;
      try {
        return $scope.db = JSON.parse(localStorage["workoutApp"]);
      } catch (_error) {
        error = _error;
        $scope.db = {};
        return console.log(error);
      }
    };
    saveData = function() {
      var error;
      try {
        return localStorage["workoutApp"] = JSON.stringify($scope.db);
      } catch (_error) {
        error = _error;
        return console.log(error);
      }
    };
    readData();
    $scope.selectDay = function(day) {
      $scope.selectedDay = day;
      $scope.state = "selectWorkout";
      $scope.workouts = day.exercises;
      return $scope.title = day.name;
    };
    $scope.backToSelectDay = function() {
      $scope.title = "12 Weeks to Size";
      return $scope.state = "selectDay";
    };
    $scope.backToSelectWorkout = function() {
      $scope.title = $scope.selectedDay.name;
      return $scope.state = "selectWorkout";
    };
    $scope.selectWorkout = function(workout) {
      $scope.selectedWorkout = workout;
      $scope.state = "workout";
      $scope.title = $scope.exercises[workout.exercise].name;
      return $scope.currentRep = 0;
    };
    $scope.getPreviousResult = function(repRef) {
      if (repRef != null) {
        return "90KG";
      } else {
        return "70KG";
      }
    };
    $scope.getResult = function(ref, index) {
      var _ref;
      if (((_ref = $scope.db[ref]) != null ? _ref[index] : void 0) != null) {
        return $scope.db[ref][index];
      } else {
        return false;
      }
    };
    $scope.resetWorkout = function() {
      $scope.currentRep = 0;
      $scope.db[$scope.selectedWorkout.id] = [];
      return saveData();
    };
    $scope.completedWorkout = function(workout) {
      var _ref;
      return workout.reps.length === ((_ref = $scope.db[workout.id]) != null ? _ref.length : void 0);
    };
    $scope.finishedWorkout = function() {
      var _ref;
      return ((_ref = $scope.selectedWorkout) != null ? _ref.reps.length : void 0) === $scope.currentRep;
    };
    $scope.nextWorkout = function() {
      $scope.weight = "";
      return $scope.backToSelectWorkout();
    };
    $scope.cancelRecordWeight = function() {
      return $scope.state = "workout";
    };
    $scope.recordWeight = function() {
      $scope.state = "typeWeight";
      return $("input").focus();
    };
    return $scope.submitWeight = function() {
      if ($scope.weight > 0) {
        $scope.state = "workout";
        saveWorkoutRep($scope.selectedWorkout.id, $scope.currentRep, $scope.weight);
        return $scope.currentRep++;
      }
    };
  });

}).call(this);
