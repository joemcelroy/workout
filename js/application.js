(function() {
  window.data = {
    exercises: {
      1: {
        name: "Barbell Squat",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_2.jpg"
      },
      2: {
        name: "Romanian Deadlift",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_2.jpg"
      },
      3: {
        name: "Lying Leg Curls",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_2.jpg"
      },
      4: {
        name: "Leg Press",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_2.jpg"
      },
      5: {
        name: "Leg Extensions",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_2.jpg"
      },
      6: {
        name: "Barbell Bench Press - Medium Grip",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_2.jpg"
      },
      7: {
        name: "Incline Dumbbell Press (Reverse Grip)",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_2.jpg"
      },
      8: {
        name: "Incline Dumbbell Flyes",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_2.jpg"
      },
      9: {
        name: "Cable Crossover",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_2.jpg"
      },
      10: {
        name: "Tricep Pushdown",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_2.jpg"
      },
      11: {
        name: "Standing Low-Pulley One-Arm Triceps Extension",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_2.jpg"
      },
      12: {
        name: "Close-Grip Barbell Bench Press",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_2.jpg"
      },
      13: {
        name: "Standing Calf Raises",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_2.jpg"
      },
      14: {
        name: "Seated Calf Raise",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_2.jpg"
      },
      15: {
        name: "Dumbbell Bent Over Row",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/16/Male/m/16_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/16/Male/m/16_2.jpg"
      },
      16: {
        name: "Wide-Grip Lat Pulldown",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/10/Male/m/10_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/10/Male/m/10_2.jpg"
      },
      17: {
        name: "Straight-Arm Pulldown",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/11/Male/m/11_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/11/Male/m/11_2.jpg"
      },
      18: {
        name: "Seated Cable Rows",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/45/Male/m/45_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/45/Male/m/45_2.jpg"
      },
      19: {
        name: "Barbell Curl",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/169/Male/m/169_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/169/Male/m/169_2.jpg"
      },
      20: {
        name: "Incline Dumbbell Curl",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/114/Male/m/114_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/114/Male/m/114_2.jpg"
      },
      21: {
        name: "Concentration Curls",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/136/Male/m/136_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/136/Male/m/136_2.jpg"
      },
      22: {
        name: "Bent-Knee Hip Raise",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/118/Male/m/118_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/118/Male/m/118_2.jpg"
      },
      23: {
        name: "Cable Crunch",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_2.jpg"
      },
      24: {
        name: "Cable Oblique Crunch",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_2.jpg"
      },
      25: {
        name: "Dumbbell Shoulder Press",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/328/Male/m/328_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/328/Male/m/328_2.jpg"
      },
      26: {
        name: "Side Lateral Raise",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/373/Male/m/373_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/373/Male/m/373_2.jpg"
      },
      27: {
        name: "Standing Dumbbell Upright Row",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/368/Male/m/368_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/368/Male/m/368_2.jpg"
      },
      28: {
        name: "Smith Machine Shrug",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_2.jpg"
      },
      29: {
        name: "Smith Machine Shrug",
        beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_1.jpg",
        afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_2.jpg"
      }
    },
    workouts: [
      {
        name: "Day 68 - Legs",
        exercises: [
          {
            exercise: 1,
            id: "68-1",
            weightRef: "61-1",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 4,
            id: "68-2",
            weightRef: "61-2",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 5,
            id: "68-3",
            weightRef: "61-3",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 2,
            id: "68-4",
            weightRef: "61-4",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }, {
            exercise: 3,
            id: "68-5",
            weightRef: "61-4",
            reps: [
              {
                name: "9 - 11"
              }, {
                name: "9 - 11"
              }, {
                name: "9 - 11 Rest Pause"
              }
            ]
          }
        ]
      }, {
        name: "Day 71 - Chest, Triceps & Calfs",
        exercises: [
          {
            exercise: 6,
            id: "71-1",
            weightRef: "64-1",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 7,
            id: "71-2",
            weightRef: "64-2",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 8,
            id: "71-3",
            weightRef: "64-3",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 9,
            id: "71-4",
            weightRef: "64-4",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 10,
            id: "71-5",
            weightRef: "64-5",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 11,
            id: "71-6",
            weightRef: "64-6",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }
            ]
          }, {
            exercise: 12,
            id: "71-7",
            weightRef: "64-7",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }
            ]
          }, {
            exercise: 13,
            id: "71-8",
            weightRef: "64-8",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Drop set"
              }
            ]
          }, {
            exercise: 14,
            id: "71-9",
            weightRef: "64-9",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Drop set"
              }
            ]
          }
        ]
      }, {
        name: "Day 72 -  Back, Biceps & Abs",
        exercises: [
          {
            exercise: 15,
            id: "72-1",
            weightRef: "65-1",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 16,
            id: "72-2",
            weightRef: "65-2",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 17,
            id: "72-3",
            weightRef: "65-3",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 18,
            id: "72-4",
            weightRef: "65-4",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 19,
            id: "72-5",
            weightRef: "65-5",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 20,
            id: "72-6",
            weightRef: "65-6",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 21,
            id: "72-7",
            weightRef: "65-7",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 22,
            id: "72-8",
            weightRef: "65-8",
            reps: [
              {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14 Rest Pause"
              }
            ]
          }, {
            exercise: 23,
            id: "72-9",
            weightRef: "65-9",
            reps: [
              {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14 Rest Pause"
              }
            ]
          }, {
            exercise: 24,
            id: "72-10",
            weightRef: "65-10",
            reps: [
              {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14 Rest Pause"
              }
            ]
          }
        ]
      }, {
        name: "Day 74 -  Shoulders, Traps & Calves",
        exercises: [
          {
            exercise: 25,
            id: "74-1",
            weightRef: "67-1",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 26,
            id: "74-2",
            weightRef: "67-2",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 27,
            id: "74-3",
            weightRef: "67-3",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 28,
            id: "74-4",
            weightRef: "67-4",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 29,
            id: "74-5",
            weightRef: "67-5",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 14,
            id: "74-6",
            weightRef: "67-6",
            reps: [
              {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14 Rest Pause"
              }
            ]
          }, {
            exercise: 13,
            id: "74-7",
            weightRef: "67-7",
            reps: [
              {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14"
              }, {
                name: "10 - 14 Rest Pause"
              }
            ]
          }
        ]
      }, {
        name: "Day 75 - Legs",
        exercises: [
          {
            exercise: 1,
            id: "75-1",
            weightRef: "68-1",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 4,
            id: "75-2",
            weightRef: "68-2",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 5,
            id: "75-3",
            weightRef: "68-3",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 2,
            id: "75-4",
            weightRef: "68-4",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }, {
            exercise: 3,
            id: "75-5",
            weightRef: "68-5",
            reps: [
              {
                name: "6 - 8"
              }, {
                name: "6 - 8"
              }, {
                name: "6 - 8 Rest Pause"
              }
            ]
          }
        ]
      }
    ]
  };

}).call(this);

(function() {
  angular.module('workout', []).directive('ngTap', function() {
    return function(scope, element, attrs) {
      var tapping;
      tapping = false;
      element.bind('touchstart', function(e) {
        return tapping = true;
      });
      element.bind('touchmove', function(e) {
        return tapping = false;
      });
      element.bind('touchend', function(e) {
        if (tapping) {
          return scope.$apply(attrs['ngTap'], element);
        }
      });
      return element.bind('click', function(e) {
        if (window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g) === null) {
          return scope.$apply(attrs['ngTap'], element);
        }
      });
    };
  }).controller("AppCtrl", function($scope) {
    var readData, saveData, saveWorkoutRep;
    $scope.state = "selectDay";
    $scope.showWeightModal = false;
    $scope.title = "12 Weeks to Size";
    $scope.exercises = window.data.exercises;
    $scope.days = window.data.workouts;
    saveWorkoutRep = function(ref, index, weight) {
      if ($scope.db[ref] == null) {
        $scope.db[ref] = [];
      }
      $scope.db[ref][index] = weight;
      return saveData();
    };
    readData = function() {
      var error;
      try {
        return $scope.db = JSON.parse(localStorage["workoutApp"]);
      } catch (_error) {
        error = _error;
        $scope.db = {};
        return console.log(error);
      }
    };
    saveData = function() {
      var error;
      try {
        return localStorage["workoutApp"] = JSON.stringify($scope.db);
      } catch (_error) {
        error = _error;
        return console.log(error);
      }
    };
    readData();
    $scope.selectDay = function(day) {
      $scope.selectedDay = day;
      $scope.state = "selectWorkout";
      $scope.workouts = day.exercises;
      return $scope.title = day.name;
    };
    $scope.backToSelectDay = function() {
      $scope.title = "12 Weeks to Size";
      return $scope.state = "selectDay";
    };
    $scope.backToSelectWorkout = function() {
      $scope.title = $scope.selectedDay.name;
      return $scope.state = "selectWorkout";
    };
    $scope.selectWorkout = function(workout) {
      $scope.selectedWorkout = workout;
      $scope.state = "workout";
      $scope.title = $scope.exercises[workout.exercise].name;
      return $scope.currentRep = 0;
    };
    $scope.getPreviousResult = function(repRef) {
      var max, min, recording, total, _i, _len, _ref;
      if ($scope.db[repRef] != null) {
        total = 0;
        min = $scope.db[repRef][0];
        max = 0;
        _ref = $scope.db[repRef];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          recording = _ref[_i];
          if (recording > max) {
            max = recording;
          }
          if (recording < min) {
            min = recording;
          }
          total += recording;
        }
        return "" + (Math.ceil(total / $scope.db[repRef].length, 0)) + "KG (" + min + " - " + max + ")";
      } else {
        return "No recording";
      }
    };
    $scope.getResult = function(ref, index) {
      var _ref;
      if (((_ref = $scope.db[ref]) != null ? _ref[index] : void 0) != null) {
        return $scope.db[ref][index];
      } else {
        return false;
      }
    };
    $scope.resetWorkout = function() {
      $scope.currentRep = 0;
      delete $scope.db[$scope.selectedWorkout.id];
      return saveData();
    };
    $scope.completedWorkout = function(workout) {
      var _ref;
      return workout.reps.length === ((_ref = $scope.db[workout.id]) != null ? _ref.length : void 0);
    };
    $scope.finishedWorkout = function() {
      var _ref;
      return ((_ref = $scope.selectedWorkout) != null ? _ref.reps.length : void 0) === $scope.currentRep;
    };
    $scope.nextWorkout = function() {
      $scope.inputWeight = "";
      return $scope.backToSelectWorkout();
    };
    $scope.cancelRecordWeight = function() {
      return $scope.showWeightModal = false;
    };
    $scope.recordWeight = function() {
      return $scope.showWeightModal = true;
    };
    return $scope.submitWeight = function() {
      if ($scope.inputWeight > 0) {
        $scope.showWeightModal = false;
        saveWorkoutRep($scope.selectedWorkout.id, $scope.currentRep, $scope.inputWeight);
        return $scope.currentRep++;
      }
    };
  });

}).call(this);
