data = {
  exercises: [
    {
      id:1
      name:"Barbell Squat"
      beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_1.jpg"
      afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/31/Male/m/31_2.jpg"
    }
    {
      id:2
      name:"Romanian Deadlift"
      beforeImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_1.jpg"
      afterImg: "http://www.bodybuilding.com/exercises/exerciseImages/sequences/171/Male/m/171_2.jpg"
    }
    {
      id:3
      name:"Lying Leg Curls"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/52/Male/m/52_2.jpg"
    }
    {
      id:4
      name:"Leg Press"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/57/Male/m/57_2.jpg"
    }
    {
      id:5
      name:"Leg Extensions"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/53/Male/m/53_2.jpg"
    }
    {
      id:6
      name:"Barbell Bench Press - Medium Grip"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/360/Male/m/360_2.jpg"
    }
    {
      id:7
      name:"Incline Dumbbell Press (Reverse Grip)"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/380/Male/m/380_2.jpg"
    }
    {
      id:8
      name:"Incline Dumbbell Flyes"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/38/Male/m/38_2.jpg"
    }
    {
      id:9
      name:"Cable Crossover"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/132/Male/m/132_2.jpg"
    } 
    {
      id:10
      name:"Tricep Pushdown"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/343/Male/m/343_2.jpg"
    } 
    {
      id:11
      name:"Standing Low-Pulley One-Arm Triceps Extension"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/149/Male/m/149_2.jpg"
    } 
    {
      id:12
      name:"Close-Grip Barbell Bench Press"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/23/Male/m/23_2.jpg"
    }
    {
      id:13
      name:"Standing Calf Raises"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/48/Male/m/48_2.jpg"
    }
    {
      id:14
      name:"Seated Calf Raise"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/152/Male/m/152_2.jpg"
    }
    {
      id:15
      name:"Dumbbell Bent Over Row"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/16/Male/m/16_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/16/Male/m/16_2.jpg"     
    }
    {
      id:16
      name:"Wide-Grip Lat Pulldown"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/10/Male/m/10_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/10/Male/m/10_2.jpg"     
    }
    {
      id:17
      name:"Straight-Arm Pulldown"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/11/Male/m/11_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/11/Male/m/11_2.jpg"     
    }
    {
      id:18
      name:"Seated Cable Rows"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/45/Male/m/45_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/45/Male/m/45_2.jpg"     
    }
    {
      id:19
      name:"Barbell Curl"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/169/Male/m/169_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/169/Male/m/169_2.jpg"     
    }
    {
      id:20
      name:"Incline Dumbbell Curl"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/114/Male/m/114_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/114/Male/m/114_2.jpg"     
    } 
    {
      id:21
      name:"Concentration Curls"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/136/Male/m/136_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/136/Male/m/136_2.jpg"     
    }
    {
      id:22
      name:"Bent-Knee Hip Raise"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/118/Male/m/118_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/118/Male/m/118_2.jpg"
    }
    {
      id:23
      name:"Cable Crunch"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_2.jpg"
    }  
    {
      id:24
      name:"Cable Oblique Crunch"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/163/Male/m/163_2.jpg"
    }
    {
      id:25
      name:"Dumbbell Shoulder Press"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/328/Male/m/328_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/328/Male/m/328_2.jpg"
    }
    {
      id:26
      name:"Side Lateral Raise"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/373/Male/m/373_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/373/Male/m/373_2.jpg"
    }
    {
      id:27
      name:"Standing Dumbbell Upright Row"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/368/Male/m/368_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/368/Male/m/368_2.jpg"
    }
    {
      id:28
      name:"Smith Machine Shrug"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_2.jpg"
    }
    {
      id:29
      name:"Smith Machine Shrug"
      beforeImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_1.jpg"
      afterImg:"http://www.bodybuilding.com/exercises/exerciseImages/sequences/134/Male/m/134_2.jpg"
    }        
  ]
  workouts: [

  ]
}



dsl = {
    phases:[
      {
        name:"Phase 3"
        startDay:57
        weeks:[
          {name:"13 - 15"}
          {name:"9 - 11"}
          {name:"6 - 8"}
          {name:"3 - 5"}
        ]
        routine:[
          {
            name:"Chest, Triceps & Calfs"
            exercises: [
              {
                exercise:6
                reps:4
              }
              {
                exercise:7
                id:"71-2"
                weightRef:"64-2"
                reps:3
              }
              {
                exercise:8
                id:"71-3"
                weightRef:"64-3"
                reps:3
              }
              {
                exercise:9
                id:"71-4"
                weightRef:"64-4"
                reps:3
              } 
              {
                exercise:10
                id:"71-5"
                weightRef:"64-5"
                reps:4
              }
              {
                exercise:11
                id:"71-6"
                weightRef:"64-6"
                reps: 3
              }
              {
                exercise:12
                id:"71-7"
                weightRef:"64-7"
                reps: 3
              }
              {
                exercise:13
                id:"71-8"
                weightRef:"64-8"
                reps: 4
              }
              {
                exercise:14
                id:"71-9"
                weightRef:"64-9"
                reps: 4
              }      
            ]
          }
          {
            name:"Back, Biceps & Abs"
            exercises: [
              {
                exercise:15
                id:"72-1"
                weightRef:"65-1"
                reps:4
              }
              {
                exercise:16
                id:"72-2"
                weightRef:"65-2"
                reps: 4
              }
              {
                exercise:17
                id:"72-3"
                weightRef:"65-3"
                reps: 3
              }
              {
                exercise:18
                id:"72-4"
                weightRef:"65-4"
                reps: 3
              }
              {
                exercise:19
                id:"72-5"
                weightRef:"65-5"
                reps: 3
              }
              {
                exercise:20
                id:"72-6"
                weightRef:"65-6"
                reps: 3
              }
              {
                exercise:21
                id:"72-7"
                weightRef:"65-7"
                reps: 3
              }
              {
                exercise:22
                id:"72-8"
                weightRef:"65-8"
                reps: 3
              }
              {
                exercise:23
                id:"72-9"
                weightRef:"65-9"
                reps: 3
              }
              {
                exercise:24
                id:"72-10"
                weightRef:"65-10"
                reps: 3
              }      
            ]
          }
         {
            name:"Shoulders, Traps & Calves"
            exercises: [
              {
                exercise:25
                id:"74-1"
                weightRef:"67-1"
                reps: 4
              }
              {
                exercise:26
                id:"74-2"
                weightRef:"67-2"
                reps: 3
              }
              {
                exercise:27
                id:"74-3"
                weightRef:"67-3"
                reps: 3
              }
              {
                exercise:28
                id:"74-4"
                weightRef:"67-4"
                reps: 3
              }
              {
                exercise:29
                id:"74-5"
                weightRef:"67-5"
                reps: 4
              }
              {
                exercise:14
                id:"74-6"
                weightRef:"67-6"
                reps: 4
              }
              {
                exercise:13
                id:"74-7"
                weightRef:"67-7"
                reps: 4
              }
           
            ]
          }
          {
            name:"Legs"
            exercises: [
              {
                exercise:1
                id:"75-1"
                weightRef:"68-1"
                reps: 4
              }
              {
                exercise:4
                id:"75-2"
                weightRef:"68-2"
                reps: 3
              }
              {
                exercise:5
                id:"75-3"
                weightRef:"68-3"
                reps: 3
              }
              {
                exercise:2
                id:"75-4"
                weightRef:"68-4"
                reps: 4
              }
              {
                exercise:3,
                id:"75-5"
                weightRef:"68-5"
                reps: 3
              }
            ]
          }
        ]
      }

    ]
}

window.data ?= {}
window.data.exercises = data.exercises

class WorkoutDSLConsumer 
  constructor: ->
    @phases = dsl.phases
    @workoutDays = []

  generateWorkout: ->
    for phase in @phases
      @generatePhase(phase)

    @workoutDays

  generatePhase: (phase) ->
    for week,weekIterator in phase.weeks
      for day,dayIterator in phase.routine
        @workoutDays.push @getWorkoutDay day, (weekIterator == 0), (phase.startDay + (weekIterator*7) + dayIterator), week.name

  getWorkoutDay:(day, isFirstWeek, dayNumber, repName) ->
    exercises = []

    for exercise,i in day.exercises

      reps = []

      for repCount in [1..exercise.reps]
        reps.push {name:repName}

      exercises.push {
        exercise:exercise.exercise
        id:"#{dayNumber}-#{i+1}"
        weightRef:(if isFirstWeek then false else "#{dayNumber-7}-#{i}")
        reps: reps
      }

    {
      name: "#{day.name}"
      exercises
    }

window.data.workouts =  new WorkoutDSLConsumer().generateWorkout()






